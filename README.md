# CandyRush - Minecraft Team Battle Plugin

4ãƒãƒ¼ãƒ å¯¾æˆ¦å‹ã®å®æ¢ã—ã‚²ãƒ¼ãƒ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³

## ğŸ® ã‚²ãƒ¼ãƒ æ¦‚è¦

- **4ãƒãƒ¼ãƒ åˆ¶**: èµ¤ãƒ»é’ãƒ»ç·‘ãƒ»é»„ã®4ãƒãƒ¼ãƒ ã§å¯¾æˆ¦
- **å®ç®±ã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒƒãƒ—å†…ã«é…ç½®ã•ã‚ŒãŸ11ç¨®é¡ã®å®ç®±ã‹ã‚‰é£Ÿæ–™ã‚’ç²å¾—
- **ãƒã‚¤ãƒ³ãƒˆå¤‰æ›**: é£Ÿæ–™ã‚’é£Ÿã¹ã¦ãƒã‚¤ãƒ³ãƒˆã«å¤‰æ›
- **ã‚¤ãƒ™ãƒ³ãƒˆNPC**: NPCã«æ¥è§¦ã—ã¦ãƒ¬ã‚¤ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ
- **ãƒœã‚¹ãƒãƒˆãƒ«**: è¨ä¼ã§500ptãƒœãƒ¼ãƒŠã‚¹
- **PvPã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒ¼ãƒ ã‚­ãƒ«ã§MurdererãƒšãƒŠãƒ«ãƒ†ã‚£
- **è‡ªå‹•é€²è¡Œ**: æœ€ä½äººæ•°ã§è‡ªå‹•ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³â†’ã‚²ãƒ¼ãƒ é–‹å§‹â†’ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³â†’å†ã‚¹ã‚¿ãƒ¼ãƒˆ

## ğŸ“‹ å¿…è¦è¦ä»¶

- **Minecraft**: 1.21.4
- **ã‚µãƒ¼ãƒãƒ¼**: Paper 1.21.4+
- **ä¾å­˜ãƒ—ãƒ©ã‚°ã‚¤ãƒ³**: MythicMobs 5.3.5+
- **Java**: 21ä»¥é™

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ãƒ“ãƒ«ãƒ‰

```bash
./gradlew build
```

ç”Ÿæˆã•ã‚Œã‚‹ãƒ•ã‚¡ã‚¤ãƒ«: `build/libs/CandyRush-1.0.0.jar`

### é–‹ç™ºç”¨ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•

```bash
./gradlew runServer
```

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ä»¥ä¸‹ã‚’è‡ªå‹•å®Ÿè¡Œï¼š
1. Paper 1.21.4ã‚µãƒ¼ãƒãƒ¼ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ“ãƒ«ãƒ‰ã¨ã‚³ãƒ”ãƒ¼
3. ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•

**åˆå›èµ·å‹•æ™‚:**
- Paper JARãŒè‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¾ã™
- `run/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒä½œæˆã•ã‚Œã¾ã™
- EULAè‡ªå‹•æ‰¿è«¾ã€ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹

**MythicMobsã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆå¿…é ˆï¼‰:**

MythicMobsã¯è‡ªå‹•ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããªã„ãŸã‚ã€æ‰‹å‹•ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ï¼š

1. https://www.spigotmc.org/resources/mythicmobs.5702/ ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. `run/plugins/` ãƒ•ã‚©ãƒ«ãƒ€ã«é…ç½®
3. ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ `MythicMobs-5.3.5.jar` ã«å¤‰æ›´ï¼ˆã¾ãŸã¯ä»»æ„ã®åå‰ã§OKï¼‰

**ã¾ãŸã¯ã€MythicMobsãªã—ã§ãƒ†ã‚¹ãƒˆ:**
- MythicMobsãªã—ã§ã‚‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯èµ·å‹•ã—ã¾ã™
- ãŸã ã—ã€ã‚¤ãƒ™ãƒ³ãƒˆNPCã¨ãƒœã‚¹æ©Ÿèƒ½ã¯å‹•ä½œã—ã¾ã›ã‚“

**ã‚µãƒ¼ãƒãƒ¼åœæ­¢:**
```
stop
```

### æœ¬ç•ªã‚µãƒ¼ãƒãƒ¼ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰
```bash
./gradlew build
```

2. JARãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
```bash
cp build/libs/CandyRush-1.0.0.jar /path/to/server/plugins/
```

3. MythicMobsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆæœªå°å…¥ã®å ´åˆï¼‰
   - https://mythiccraft.io/

4. ã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•

## âš™ï¸ è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

`plugins/CandyRush/config.yml`

```yaml
game:
  min-players: 2              # æœ€ä½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ•°
  countdown-seconds: 10       # ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³ç§’æ•°
  cooldown-minutes: 5         # ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³æ™‚é–“
  duration-minutes: 20        # ã‚²ãƒ¼ãƒ æ™‚é–“
  map-radius: 250            # ãƒãƒƒãƒ—åŠå¾„

treasure:
  per-chunk: 1               # ãƒãƒ£ãƒ³ã‚¯ã‚ãŸã‚Šã®å®ç®±æ•°
  trapped-chest-damage: 4.0  # ãƒˆãƒ©ãƒƒãƒ—ãƒ€ãƒ¡ãƒ¼ã‚¸
  respawn-delay-seconds: 60  # ãƒªã‚¹ãƒãƒ¼ãƒ³æ™‚é–“

event:
  npc-per-chunks: 3          # NPCé…ç½®é–“éš”
  raid-duration-seconds: 300 # ãƒ¬ã‚¤ãƒ‰æ™‚é–“
  escape-distance-chunks: 2  # è„±å‡ºè·é›¢

murderer:
  duration-seconds: 600      # MurdereræŒç¶šæ™‚é–“

mythicmobs:
  event-npc-type: EventNPC   # ã‚¤ãƒ™ãƒ³ãƒˆNPCå
  boss-type: CandyRushBoss   # ãƒœã‚¹å
```

## ğŸ¯ ã‚³ãƒãƒ³ãƒ‰

| ã‚³ãƒãƒ³ãƒ‰ | èª¬æ˜ | æ¨©é™ |
|---------|------|------|
| `/stats` | å€‹äººçµ±è¨ˆè¡¨ç¤º | candyrush.stats |
| `/stats top` | ãƒˆãƒƒãƒ—ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼TOP10 | candyrush.stats |
| `/stats teams` | ãƒãƒ¼ãƒ ãƒ©ãƒ³ã‚­ãƒ³ã‚° | candyrush.stats |
| `/convert` | ã‚¤ãƒ³ãƒ™ãƒ³ãƒˆãƒªå†…å…¨é£Ÿæ–™ã‚’ä¸€æ‹¬å¤‰æ› | candyrush.convert |

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/main/java/com/candyrush/
â”œâ”€â”€ CandyRushPlugin.java          # ãƒ¡ã‚¤ãƒ³ã‚¯ãƒ©ã‚¹
â”œâ”€â”€ commands/                      # ã‚³ãƒãƒ³ãƒ‰
â”‚   â”œâ”€â”€ StatsCommand.java
â”‚   â””â”€â”€ ConvertCommand.java
â”œâ”€â”€ listeners/                     # ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
â”‚   â”œâ”€â”€ PlayerConnectionListener.java
â”‚   â”œâ”€â”€ TreasureChestListener.java
â”‚   â”œâ”€â”€ FoodConsumeListener.java
â”‚   â”œâ”€â”€ EventNpcListener.java
â”‚   â”œâ”€â”€ BossDeathListener.java
â”‚   â””â”€â”€ PvpListener.java
â”œâ”€â”€ managers/                      # ã‚²ãƒ¼ãƒ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼
â”‚   â”œâ”€â”€ GameManager.java
â”‚   â”œâ”€â”€ TeamManager.java
â”‚   â”œâ”€â”€ PlayerManager.java
â”‚   â”œâ”€â”€ TreasureChestManager.java
â”‚   â”œâ”€â”€ PointConversionManager.java
â”‚   â”œâ”€â”€ EventNpcManager.java
â”‚   â””â”€â”€ BossManager.java
â”œâ”€â”€ models/                        # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ ChestType.java
â”‚   â”œâ”€â”€ GameState.java
â”‚   â”œâ”€â”€ GameRound.java
â”‚   â”œâ”€â”€ PlayerData.java
â”‚   â”œâ”€â”€ Team.java
â”‚   â””â”€â”€ TeamColor.java
â”œâ”€â”€ storage/                       # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ DatabaseInitializer.java
â”‚   â”œâ”€â”€ PlayerDataStorage.java
â”‚   â””â”€â”€ GameStateStorage.java
â”œâ”€â”€ integration/                   # å¤–éƒ¨é€£æº
â”‚   â””â”€â”€ MythicMobsIntegration.java
â””â”€â”€ utils/                         # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
    â”œâ”€â”€ ConfigManager.java
    â””â”€â”€ MessageUtils.java
```

## ğŸ¨ MythicMobsè¨­å®š

ä»¥ä¸‹ã®Mobã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼š

### EventNPCï¼ˆã‚¤ãƒ™ãƒ³ãƒˆNPCï¼‰
- ã‚¿ã‚¤ãƒ—: VILLAGERæ¨å¥¨
- ä¸æ­»èº«ï¼ˆInvincible: trueï¼‰
- å³ã‚¯ãƒªãƒƒã‚¯ã§ãƒ¬ã‚¤ãƒ‰ã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿ

### CandyRushBossï¼ˆãƒœã‚¹ï¼‰
- è¨ä¼ã§500ptç²å¾—
- å¼·åŠ›ãªæ”»æ’ƒåŠ›ã¨ä½“åŠ›

è¨­å®šä¾‹ã¯ `plugins/MythicMobs/Mobs/` ã«é…ç½®

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

- **ã‚¿ã‚¤ãƒ—**: SQLite
- **å ´æ‰€**: `plugins/CandyRush/data.db`
- **ãƒ†ãƒ¼ãƒ–ãƒ«**: players, game_rounds, team_scores, player_stats

## ğŸ”§ é–‹ç™º

### ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰

```bash
# ã‚¯ãƒªãƒ¼ãƒ³ãƒ“ãƒ«ãƒ‰
./gradlew clean build

# ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆè‡ªå‹•ãƒ“ãƒ«ãƒ‰å«ã‚€ï¼‰
./gradlew runServer

# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã¿å†ãƒ“ãƒ«ãƒ‰ãƒ»ã‚³ãƒ”ãƒ¼
./gradlew copyPlugin
```

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

```
run/
â”œâ”€â”€ paper.jar              # Paper ã‚µãƒ¼ãƒãƒ¼
â”œâ”€â”€ plugins/
â”‚   â”œâ”€â”€ CandyRush.jar     # è‡ªå‹•ã‚³ãƒ”ãƒ¼ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³
â”‚   â””â”€â”€ MythicMobs-5.3.5.jar
â”œâ”€â”€ eula.txt              # è‡ªå‹•æ‰¿è«¾æ¸ˆã¿
â””â”€â”€ server.properties     # ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ãƒ¢ãƒ¼ãƒ‰è¨­å®šæ¸ˆã¿
```

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## ğŸ™ ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ

- Paper - https://papermc.io/
- MythicMobs - https://mythiccraft.io/
- HikariCP - https://github.com/brettwooldridge/HikariCP
- SQLite - https://www.sqlite.org/
